Component({properties:{title:{type:String,value:"标题"},desc:{type:String,value:"小标题"},src:{type:String,value:"",observer(t){t&&this.handleInitAudio(t)}}},data:{isPlay:!1,currentTimeStr:"00:00",durationStr:"00:00",progress:0},detached(){this.innerAudioContext&&this.innerAudioContext.destroy()},methods:{handleInitAudio(t){this.innerAudioContext=wx.createInnerAudioContext(),this.innerAudioContext.src=t,this.innerAudioContext.onPlay(()=>{console.log("开始播放")}),this.innerAudioContext.onCanplay(()=>{this.innerAudioContext.duration,setTimeout(()=>{const t=this.parseTime(this.innerAudioContext.duration);this.setData({durationStr:t})},1e3)}),this.innerAudioContext.onError(t=>{console.log(t.errMsg),console.log(t.errCode)}),this.innerAudioContext.onEnded(()=>{this.setData({isPlay:!1})}),this.innerAudioContext.onTimeUpdate(()=>{const t=this.innerAudioContext.currentTime,e=this.innerAudioContext.duration,i=this.parseTime(t),n=t/e*100;this.setData({currentTimeStr:i,progress:n})})},handleControl(){this.data.isPlay?(this.setData({isPlay:!1}),this.innerAudioContext.pause()):(this.setData({isPlay:!0}),this.innerAudioContext.play())},parseTime(t){const e=Math.floor(t/60),i=Math.floor(t%60);return`${e<10?"0"+e:e}:${i<10?"0"+i:i}`}}});